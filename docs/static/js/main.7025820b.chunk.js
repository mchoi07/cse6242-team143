(this["webpackJsonpdata-visualization"]=this["webpackJsonpdata-visualization"]||[]).push([[0],{107:function(t,e,a){},109:function(t,e,a){"use strict";a.r(e);var n=a(17),c=a(6),s=a(0),i=a(9),l=a.n(i),r=(a(96),a(45)),o=a(77),u=a(141),h=a(111),b=a(152),d=a(156),j=a(153),m=a(159),g=a(80),x=a(151),v=a(71),p=a(72),O=a(51),f=a(78),k=a(76),S=a(23),C=(a(107),a(18)),y=function(t){Object(f.a)(a,t);var e=Object(k.a)(a);function a(t){var n;return Object(v.a)(this,a),(n=e.call(this,t)).state=n.getStateFromProps(t),n._tooltipHtml=n._tooltipHtml.bind(Object(O.a)(n)),n._onChange=n._onChange.bind(Object(O.a)(n)),n}return Object(p.a)(a,[{key:"getStateFromProps",value:function(t){var e=C.chartWidth,a=C.chartMargin,n=C.brushMargin,c=this._getRange(t.data),s=c.minX,i=c.maxX;return{data:t.data,xScale:S.d3.time.scale().domain([s,i]).range([0,e-(null===a||void 0===a?void 0:a.left)-(null===a||void 0===a?void 0:a.right)]),xScaleBrush:S.d3.time.scale().domain([s,i]).range([0,e-(null===n||void 0===n?void 0:n.left)-(null===n||void 0===n?void 0:n.right)])}}},{key:"componentDidUpdate",value:function(t){if(this.props.data!==t.data){var e=this.getStateFromProps(this.props);this.setState(this.getStateFromProps(e))}}},{key:"_getRange",value:function(t){var e,a,n,c;t.length>0&&(e=(null===(n=t[0].values)||void 0===n?void 0:n.length)>0?t[0].values[0].x:0,a=(null===(c=t[0].values)||void 0===c?void 0:c.length)>0?t[0].values[t[0].values.length-1].x:0);return{minX:e,maxX:a}}},{key:"_tooltipHtml",value:function(t,e){return"stock"===t?Object(c.jsxs)("div",{children:["price: $",e.price]}):Object(c.jsxs)("div",{children:["positives: ",e.positives,Object(c.jsx)("br",{}),"neutrals: ",e.neutrals,Object(c.jsx)("br",{}),"negatives: ",e.negatives]})}},{key:"_onChange",value:function(t){var e=C.chartWidth,a=C.chartMargin;this.setState({xScale:S.d3.time.scale().domain([t[0],t[1]]).range([0,e-(null===a||void 0===a?void 0:a.left)-(null===a||void 0===a?void 0:a.right)])})}},{key:"render",value:function(){var t=C.chartWidth,e=C.chartHeight,a=C.chartMargin,n=C.brushHeight,s=C.brushMargin,i=this._getRange(this.state.data),l=i.minX,r=i.maxX;return Object(c.jsxs)("div",{children:[Object(c.jsx)(S.LineChart,{data:this.state.data,width:t,height:e,margin:a,xScale:this.state.xScale,xAxis:{tickValues:this.state.xScale.ticks(S.d3.time.day,2),tickFormat:S.d3.time.format("%m/%d")},tooltipHtml:this._tooltipHtml}),Object(c.jsx)("div",{className:"brush",style:{float:"none"},children:Object(c.jsx)(S.Brush,{width:t,height:n,margin:s,xScale:this.state.xScaleBrush,extent:[l,r],onChange:this._onChange,xAxis:{tickValues:this.state.xScaleBrush.ticks(S.d3.time.day,2),tickFormat:S.d3.time.format("%m/%d")}})})]})}}]),a}(s.Component),_=a(155),w=a(143),D=a(145),F=a(154),N=a(147),T=a(148),A=a(160),P=a(146),L=a(161),H=a(150),M=a(157),B=a(149),I=a(158),X=Object(u.a)((function(t){return Object(m.a)({card:{width:200,padding:"8 16"},cardTitle:{textAlign:"center"},cardAction:{textAlign:"center"}})})),E=function(t){var e=X(),a=Object(s.useState)(1),i=Object(n.a)(a,2),l=i[0],r=i[1],o=Object(s.useState)(!0),u=Object(n.a)(o,2),h=u[0],b=u[1],d=Object(s.useState)(!0),j=Object(n.a)(d,2),m=j[0],g=j[1],x=Object(s.useState)(!0),v=Object(n.a)(x,2),p=v[0],O=v[1],f=Object(s.useState)("twitter"),k=Object(n.a)(f,2),S=k[0],C=k[1],y={textblob:h,small:m,large:p},E=function(e){y[e.target.name]=e.target.checked,"textblob"===e.target.name?b(e.target.checked):"large"===e.target.name?O(e.target.checked):g(e.target.checked),t.onChange({normFactor:l,source:S,modelSelected:y})};return Object(c.jsxs)(_.a,{alignItems:"center",justifyContent:"center",children:[Object(c.jsxs)(w.a,{className:e.card,children:[Object(c.jsx)("h3",{className:e.cardTitle,children:"Stock Movement"}),Object(c.jsx)(D.a,{children:Object(c.jsx)(F.a,{className:e.input,label:"scaling adjustment",type:"number",fullWidth:!0,inputProps:{min:1,max:5,step:"0.1",style:{height:5,textAlign:"right"}},InputLabelProps:{shrink:!0},variant:"outlined",value:l,onChange:function(t){r(+t.target.value)}})}),Object(c.jsx)(N.a,{className:e.cardAction,children:Object(c.jsx)(T.a,{size:"small",variant:"outlined",onClick:function(e){t.onChange({normFactor:l,source:S,modelSelected:y})},children:"Apply"})})]}),Object(c.jsxs)(w.a,{className:e.card,children:[Object(c.jsx)("h3",{className:e.cardTitle,children:"Sentiment Analysis"}),Object(c.jsxs)(D.a,{children:[Object(c.jsxs)(A.a,{component:"fieldset",children:[Object(c.jsx)(P.a,{component:"legend",children:"Source"}),Object(c.jsxs)(L.a,{defaultValue:"twitter",name:"sentiment-model",onChange:function(e){C(e.target.defaultValue),t.onChange({normFactor:l,source:e.target.defaultValue,modelSelected:y})},children:[Object(c.jsx)(H.a,{value:"twitter",control:Object(c.jsx)(M.a,{}),label:"Twitter"}),Object(c.jsx)(H.a,{value:"nytimes",control:Object(c.jsx)(M.a,{}),label:"NYTimes"})]})]}),Object(c.jsxs)(A.a,{component:"fieldset",children:[Object(c.jsx)(P.a,{component:"legend",children:"Model"}),Object(c.jsxs)(B.a,{children:[Object(c.jsx)(H.a,{control:Object(c.jsx)(I.a,{onChange:E,checked:h,name:"textblob"}),label:"TextBlob"}),Object(c.jsx)(H.a,{control:Object(c.jsx)(I.a,{onChange:E,checked:m,name:"small"}),label:"Custom (small)"}),Object(c.jsx)(H.a,{control:Object(c.jsx)(I.a,{onChange:E,checked:p,name:"large"}),label:"Custom (large)"})]})]})]})]})]})},W=Object(u.a)((function(t){return Object(m.a)({container:{flexGrow:1},paper:{padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary}})})),V=function(t){var e=W(),a=[{label:"stock",values:t.chartData.stock},{label:"textblob",values:t.chartData.sentiment.twitter.textblob},{label:"small",values:t.chartData.sentiment.twitter.small},{label:"large",values:t.chartData.sentiment.twitter.large}],i=Object(s.useState)(a),l=Object(n.a)(i,2),o=l[0],u=l[1];return Object(c.jsx)("div",{className:e.container,children:Object(c.jsxs)(x.a,{container:!0,spacing:3,children:[Object(c.jsx)(x.a,{item:!0,xs:2,children:Object(c.jsx)(E,{onChange:function(e){var a=e.normFactor,n=e.source,c=e.modelSelected,s=[{label:"stock",values:t.chartData.stock.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{y:t.y*a})}))}];c.textblob&&s.push({label:"textblob",values:t.chartData.sentiment[n].textblob}),c.small&&s.push({label:"small",values:t.chartData.sentiment[n].small}),c.large&&s.push({label:"large",values:t.chartData.sentiment[n].large}),u(s)}})}),Object(c.jsx)(x.a,{item:!0,xs:10,children:Object(c.jsx)(g.a,{className:e.paper,children:Object(c.jsx)(y,{data:o})})})]})})};function R(t){var e=t.value,a=t.index,n=t.chartData,s=Object(o.a)(t,["value","index","chartData"]);return Object(c.jsx)("div",Object(r.a)(Object(r.a)({role:"tabpanel",hidden:e!==a,id:"tabpanel-".concat(a)},s),{},{children:e===a&&Object(c.jsx)(V,{chartData:n})}))}var z=Object(u.a)((function(t){return{root:{margin:"auto",width:1280,flexGrow:1,backgroundColor:t.palette.background.paper}}}));function J(t){var e=z(),a=Object(s.useState)(0),i=Object(n.a)(a,2),l=i[0],r=i[1],o=C.companies;return Object(c.jsxs)("div",{className:e.root,children:[Object(c.jsx)(h.a,{variant:"h2",align:"center",children:"Sentiment Analysis for Stockmarket"}),Object(c.jsx)(b.a,{position:"static",children:Object(c.jsx)(d.a,{value:l,onChange:function(t,e){r(e)},children:o.map((function(t,e){return Object(c.jsx)(j.a,{label:t},"tab-".concat(e))}))})}),o.map((function(e,a){return Object(c.jsx)(R,{value:l,index:a,chartData:t.appData[e]},"panel-".concat(a))}))]})}var G=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,163)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,s=e.getLCP,i=e.getTTFB;a(t),n(t),c(t),s(t),i(t)}))},Y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.map((function(t){var n=t.date,c=t.company,s=t.source,i=t.sent_score_textblob,l=t.sent_score_custom,r=t.positives_textblob,o=t.neutrals_textblob,u=t.negatives_textblob,h=t.positives_custom,b=t.neutrals_custom,d=t.negatives_custom,j=t.price,m=t.price_change,g=n.split("-"),x=new Date("".concat(g[2],"-").concat(g[0],"-").concat(g[1],"T20:00:00.000Z"));e[c]=e[c]||{stock:[],sentiment:{twitter:{textblob:[],small:[],large:[]},nytimes:{textblob:[],small:[],large:[]}}},a?e[c].sentiment[s.toLowerCase()].large.push({x:x,y:l,source:s,positives:h,neutrals:b,negatives:d}):("TWITTER"===s&&e[c].stock.push({x:x,price:j,y:j&&m?m/j:0}),e[c].sentiment[s.toLowerCase()].textblob.push({x:x,y:i,source:s,positives:r,neutrals:o,negatives:u}),e[c].sentiment[s.toLowerCase()].small.push({x:x,y:l,source:s,positives:h,neutrals:b,negatives:d}))})),e};Promise.all([fetch("data/aggregated.json"),fetch("data/aggregated_large.json")]).then((function(t){var e=Object(n.a)(t,2),a=e[0],c=e[1];return Promise.all([a.json(),c.json()])})).then((function(t){var e=Object(n.a)(t,2),a=e[0],s=e[1],i=Y(a);Y(s,i,!0),l.a.render(Object(c.jsx)(J,{appData:i}),document.getElementById("root"))})),G()},18:function(t){t.exports=JSON.parse('{"companies":["APPLE","DISNEY","NETFLIX","TESLA"],"chartMargin":{"top":10,"bottom":50,"left":50,"right":20},"brushMargin":{"top":0,"bottom":30,"left":50,"right":20},"chartWidth":1000,"chartHeight":400,"brushHeight":50}')},96:function(t,e,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.7025820b.chunk.js.map