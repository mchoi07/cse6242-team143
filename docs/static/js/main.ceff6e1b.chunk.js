(this["webpackJsonpdata-visualization"]=this["webpackJsonpdata-visualization"]||[]).push([[0],{107:function(t,e,a){},109:function(t,e,a){"use strict";a.r(e);var n=a(6),c=a(0),i=a(9),s=a.n(i),o=(a(96),a(24)),r=a(45),l=a(77),u=a(141),d=a(111),h=a(152),b=a(156),j=a(153),m=a(159),x=a(80),g=a(151),v=a(71),p=a(72),O=a(51),f=a(78),S=a(76),k=a(22),y=(a(107),a(17)),C=function(t){Object(f.a)(a,t);var e=Object(S.a)(a);function a(t){var n;return Object(v.a)(this,a),(n=e.call(this,t)).state=n.getStateFromProps(t),n._tooltipHtml=n._tooltipHtml.bind(Object(O.a)(n)),n._onChange=n._onChange.bind(Object(O.a)(n)),n}return Object(p.a)(a,[{key:"getStateFromProps",value:function(t){var e=y.chartWidth,a=y.chartMargin,n=y.brushMargin,c=this._getRange(t.data),i=c.minX,s=c.maxX;return{data:t.data,xScale:k.d3.time.scale().domain([i,s]).range([0,e-(null===a||void 0===a?void 0:a.left)-(null===a||void 0===a?void 0:a.right)]),xScaleBrush:k.d3.time.scale().domain([i,s]).range([0,e-(null===n||void 0===n?void 0:n.left)-(null===n||void 0===n?void 0:n.right)])}}},{key:"componentDidUpdate",value:function(t){if(this.props.data!==t.data){var e=this.getStateFromProps(this.props);this.setState(this.getStateFromProps(e))}}},{key:"_getRange",value:function(t){var e,a,n,c;t.length>0&&(e=(null===(n=t[0].values)||void 0===n?void 0:n.length)>0?t[0].values[0].x:0,a=(null===(c=t[0].values)||void 0===c?void 0:c.length)>0?t[0].values[t[0].values.length-1].x:0);return{minX:e,maxX:a}}},{key:"_tooltipHtml",value:function(t,e){return"stock"===t?Object(n.jsxs)("div",{children:["price: $",e.price]}):Object(n.jsxs)("div",{children:["positives: ",e.positives,Object(n.jsx)("br",{}),"negatives: ",e.negatives]})}},{key:"_onChange",value:function(t){var e=y.chartWidth,a=y.chartMargin;this.setState({xScale:k.d3.time.scale().domain([t[0],t[1]]).range([0,e-(null===a||void 0===a?void 0:a.left)-(null===a||void 0===a?void 0:a.right)])})}},{key:"render",value:function(){var t=y.chartWidth,e=y.chartHeight,a=y.chartMargin,c=y.brushHeight,i=y.brushMargin,s=this._getRange(this.state.data),o=s.minX,r=s.maxX;return Object(n.jsxs)("div",{children:[Object(n.jsx)(k.LineChart,{data:this.state.data,width:t,height:e,margin:a,xScale:this.state.xScale,xAxis:{tickValues:this.state.xScale.ticks(k.d3.time.day,2),tickFormat:k.d3.time.format("%m/%d")},tooltipHtml:this._tooltipHtml}),Object(n.jsx)("div",{className:"brush",style:{float:"none"},children:Object(n.jsx)(k.Brush,{width:t,height:c,margin:i,xScale:this.state.xScaleBrush,extent:[o,r],onChange:this._onChange,xAxis:{tickValues:this.state.xScaleBrush.ticks(k.d3.time.day,2),tickFormat:k.d3.time.format("%m/%d")}})})]})}}]),a}(c.Component),_=a(155),w=a(143),D=a(145),F=a(154),N=a(147),T=a(148),A=a(160),P=a(146),H=a(161),L=a(150),M=a(157),B=a(149),I=a(158),X=Object(u.a)((function(t){return Object(m.a)({card:{width:200,padding:"8 16"},cardTitle:{textAlign:"center"},cardAction:{textAlign:"center"}})})),E=function(t){var e=X(),a=Object(c.useState)(1),i=Object(o.a)(a,2),s=i[0],r=i[1],l=Object(c.useState)(!0),u=Object(o.a)(l,2),d=u[0],h=u[1],b=Object(c.useState)(!0),j=Object(o.a)(b,2),m=j[0],x=j[1],g=Object(c.useState)("twitter"),v=Object(o.a)(g,2),p=v[0],O=v[1],f={textblob:d,custom:m},S=function(e){f[e.target.name]=e.target.checked,"textblob"===e.target.name?h(e.target.checked):x(e.target.checked),t.onChange({normFactor:s,source:p,modelSelected:f})};return Object(n.jsxs)(_.a,{alignItems:"center",justifyContent:"center",children:[Object(n.jsxs)(w.a,{className:e.card,children:[Object(n.jsx)("h3",{className:e.cardTitle,children:"Stock Movement"}),Object(n.jsx)(D.a,{children:Object(n.jsx)(F.a,{className:e.input,label:"normalization factor",type:"number",fullWidth:!0,inputProps:{min:1,max:5,step:"0.1",style:{textAlign:"right"}},InputLabelProps:{shrink:!0},variant:"outlined",value:s,onChange:function(t){r(+t.target.value)}})}),Object(n.jsx)(N.a,{className:e.cardAction,children:Object(n.jsx)(T.a,{size:"small",variant:"outlined",onClick:function(e){t.onChange({normFactor:s,source:p,modelSelected:f})},children:"Apply"})})]}),Object(n.jsxs)(w.a,{className:e.card,children:[Object(n.jsx)("h3",{className:e.cardTitle,children:"Sentiment Analysis"}),Object(n.jsxs)(D.a,{children:[Object(n.jsxs)(A.a,{component:"fieldset",children:[Object(n.jsx)(P.a,{component:"legend",children:"Source"}),Object(n.jsxs)(H.a,{defaultValue:"twitter",name:"sentiment-model",onChange:function(e){O(e.target.defaultValue),t.onChange({normFactor:s,source:e.target.defaultValue,modelSelected:f})},children:[Object(n.jsx)(L.a,{value:"twitter",control:Object(n.jsx)(M.a,{}),label:"Twitter"}),Object(n.jsx)(L.a,{value:"nytimes",control:Object(n.jsx)(M.a,{}),label:"NYTimes"})]})]}),Object(n.jsxs)(A.a,{component:"fieldset",children:[Object(n.jsx)(P.a,{component:"legend",children:"Model"}),Object(n.jsxs)(B.a,{children:[Object(n.jsx)(L.a,{control:Object(n.jsx)(I.a,{onChange:S,checked:d,name:"textblob"}),label:"TextBlob"}),Object(n.jsx)(L.a,{control:Object(n.jsx)(I.a,{onChange:S,checked:m,name:"custom"}),label:"Custom"})]})]})]})]})]})},W=Object(u.a)((function(t){return Object(m.a)({container:{flexGrow:1},paper:{padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary}})})),V=function(t){var e=W(),a=[{label:"stock",values:t.chartData.stock},{label:"textblob",values:t.chartData.sentiment.twitter.textblob},{label:"custom",values:t.chartData.sentiment.twitter.custom}],i=Object(c.useState)(a),s=Object(o.a)(i,2),l=s[0],u=s[1];return Object(n.jsx)("div",{className:e.container,children:Object(n.jsxs)(g.a,{container:!0,spacing:3,children:[Object(n.jsx)(g.a,{item:!0,xs:2,children:Object(n.jsx)(E,{onChange:function(e){var a=e.normFactor,n=e.source,c=e.modelSelected,i=[{label:"stock",values:t.chartData.stock.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{y:t.y*a})}))}];c.textblob&&i.push({label:"textblob",values:t.chartData.sentiment[n].textblob}),c.custom&&i.push({label:"custom",values:t.chartData.sentiment[n].custom}),u(i)}})}),Object(n.jsx)(g.a,{item:!0,xs:10,children:Object(n.jsx)(x.a,{className:e.paper,children:Object(n.jsx)(C,{data:l})})})]})})};function z(t){var e=t.value,a=t.index,c=t.chartData,i=Object(l.a)(t,["value","index","chartData"]);return Object(n.jsx)("div",Object(r.a)(Object(r.a)({role:"tabpanel",hidden:e!==a,id:"tabpanel-".concat(a)},i),{},{children:e===a&&Object(n.jsx)(V,{chartData:c})}))}var R=Object(u.a)((function(t){return{root:{margin:"auto",width:1280,flexGrow:1,backgroundColor:t.palette.background.paper}}}));function J(t){var e=R(),a=Object(c.useState)(0),i=Object(o.a)(a,2),s=i[0],r=i[1],l=y.companies;return Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsx)(d.a,{variant:"h2",align:"center",children:"Sentiment Analysis for Stockmarket"}),Object(n.jsx)(h.a,{position:"static",children:Object(n.jsx)(b.a,{value:s,onChange:function(t,e){r(e)},children:l.map((function(t,e){return Object(n.jsx)(j.a,{label:t},"tab-".concat(e))}))})}),l.map((function(e,a){return Object(n.jsx)(z,{value:s,index:a,chartData:t.appData[e]},"panel-".concat(a))}))]})}var G=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,163)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,i=e.getLCP,s=e.getTTFB;a(t),n(t),c(t),i(t),s(t)}))};fetch("data/aggregated.json").then((function(t){return t.json()})).then((function(t){var e=function(t){var e={};return t.map((function(t){var a=t.date,n=t.company,c=t.source,i=t.sent_score_textblob,s=t.sent_score_custom,o=t.positives_textblob,r=t.negatives_textblob,l=t.positives_custom,u=t.negatives_custom,d=t.price,h=t.price_change,b=a.split("-"),j=new Date("".concat(b[2],"-").concat(b[0],"-").concat(b[1],"T20:00:00.000Z"));e[n]=e[n]||{stock:[],sentiment:{twitter:{textblob:[],custom:[]},nytimes:{textblob:[],custom:[]}}},"TWITTER"===c&&e[n].stock.push({x:j,price:d,y:d&&h?h/d:0}),e[n].sentiment[c.toLowerCase()].textblob.push({x:j,y:i,source:c,positives:o,negatives:r}),e[n].sentiment[c.toLowerCase()].custom.push({x:j,y:s,source:c,positives:l,negatives:u})})),e}(t);s.a.render(Object(n.jsx)(J,{appData:e}),document.getElementById("root"))})),G()},17:function(t){t.exports=JSON.parse('{"companies":["APPLE","DISNEY","NETFLIX","TESLA"],"chartMargin":{"top":10,"bottom":50,"left":50,"right":20},"brushMargin":{"top":0,"bottom":30,"left":50,"right":20},"chartWidth":1000,"chartHeight":400,"brushHeight":50}')},96:function(t,e,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.ceff6e1b.chunk.js.map